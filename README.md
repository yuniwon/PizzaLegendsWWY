# PizzaLegendsWWY
 <h1>자바스크립트 프로젝트 피자전설RPG</h1>
<ul>
  <h2>1. 개발 목적</h2>
  <li>바닐라 자바스크립트, css, html을 사용하여 게임을 구현, 언어 사용을 숙달한다.</li>
    <li>자바스크립트 내 canvas,DOM 요소를 사용하여 동적 이미지를 표시하는 법을 익힌다.</li>
    <li>class를 적극 활용해 객체지향 프로그래밍을 숙달한다.</li>
<!--     <li>tiled 프로그램과 CDN 등 외부요소를 이용해 원하는 이미지와 효과를 구현할 수 있다.</li> -->
</ul>
<ul>
  <h2>2. 개발 순서</h2>
    <li>
    프로젝트 설정
  </li>
  <li>
    맵 제작(tiled 프로그램 이용)
  </li>
  <li>
    맵 및 플레이어 이동 구현
    <ul>
      <li>스프라이트 객체 생성</li>
      <li>맵 내 충돌지역 설정(이동불가 경계, 전투구역 경계)</li>
      <li>캐릭터 키보드 이동</li>
      <li>캐릭터 애니메이션 </li>
    </ul>
  </li>
  <li>
    전투 시퀀스 구현
      <ul>
      <li>전투화면 생성</li>
     <li>배경 및 몬스터 애니메이션</li>
     <li>스킬 사용 이벤트 및 애니메이션</li>
  </ul>

  </li>
  <li>
    장소 전환 구현
   <ul>
    <li>장면 전환 애니메이션</li>
    <li>전투 진입 애니메이션</li>
   </ul>
  </li>
</ul>
<ul>
  <h2>3. 추가 사항(더 하면 좋을것들)</h2>
      <li> 맵 내 사물과 상호작용</li>
        <ul>
          <li> npc 구현</li>
          <li> npc와 대화 </li>
          <li> 사물 선택시 설명창 </li>
        </ul>
    <li> 전투 관련 요소 추가</li>
  <ul>
    <li>다양한 몬스터 추가</li>
    <li>전투시 몬스터 선택 구현</li>
    <li>몬스터 레벨업 구현</li>
  </ul>
  <li>
    맵 이동 구현
  </li>
  <ul>
    <li>건물 진입 및 나가기 구현</li>
    <li>지역 별 맵 이동</li>
  </ul>
  
</ul>

<!-- 실행순서 
1. init.js
 -> 오버월드 객체를 생성하고 game-container DOM을 넘겨준 뒤 init() 실행
2. overworld.js
-> 시작할 월드맵에 대한 데이터를 불러와 overworldMap 클래스에 넘겨준 뒤 mountObject() 실행
2-1. overworldMap.js
-> 맵 데이터를 불러올 때 안에 있는 gameObject들은 각 데이터에 따른 Person 객체를 생성하고 맵에 로딩된다. Person 클래스는 gameObject를 상속받은 클래스이며 각 스프라이트(sprite) 이미지를 생성하고, 위치정보와 행동, 대사를 가지고 있음.
오브젝트 이외에는 맵 이미지와 벽, 맵의 특정위치에서의 컷씬 이벤트를 가지고 있다.
2-2. 맵 안의 오브젝트와 이벤트를 생성하고 나면 키보드와 마우스 입력을 받기위한 메서드가 실행된다. 
2-3. 그 뒤 게임루프가 시작된다.
2-4. 만약 초기 이벤트 컷씬이 필요하다면 여기에 추가해준다.
-> 맵의 컷씬 이벤트는 다양한 곳에서 접근 가능하다. 이벤트에 관해서는 뒤에서 설명한다.
3.startGameLoop가 실행되면 불러왔던 맵 데이터들을 화면에 출력한다. 플레이어를 화면의 중앙에 위치하게 하고 방향이 변경하면 맵의 다른 오브젝트들의 위치를 업데이트해서 새로고침한다. 이미지를 그리는 순서는 1. 빈 배경 채우기 2. 배경 하단부 그리기, 3. Y포지션에 따라 객체들 그리기 4. 상단 배경이미지 그리기 이다.
4. 게임루프가 새로고침되는 동안 모든 오브젝트는 업데이트를 통해 움직임을 체크하게된다. 움직임은 한 칸(16픽셀) 단위로 이루어지므로, 한번의 입력을 받으면 16픽셀씩 이동하게 된다. 
-> 만약 움직이는 중이라면 (움직일 픽셀이 남아있다면) 움직임이 완료될때까지 이동방향으로 위치를 업데이트하고 이미지를 새로고침한 뒤 다음으로 넘어간다.
-> 멈춰있을때, 플레이어 캐릭터이고 입력된 방향이 있으면서 컷씬중이 아니라면 walk행동을 시작한다. 
-> 이동과 멈춤은 행동시작 함수를 통해 이뤄진다. 다른 오브젝트도 같은 기능으로 동작 가능하다.

5. 플레이어의 위치 이벤트와 대화 이벤트 이외에 npc들의 이벤트는 초기에 startMap을 실행하면서 mount 함수에 의해 행동루프가 등록된다. npc에게 행동루프가 존재한다면 행동루프 배열의 시작부터 마지막까지 각 오브젝트에 적힌 행동을 비동기적으로 반복하게 된다.

6. 이후는 플레이어의 입력에 따른 반응들이 있다.
- 대화이벤트는 캐릭터가 움직이는 방향 앞에 npc가 존재할 때, 그 npc에게 대사가 있다면 엔터를 누름으로써 작동한다.
- 위치이벤트는 캐릭터 이동이 업데이트 될 때, 해당 맵에 컷씬구역이 존재하고, 그 구역에 도달하게 되면 작동한다.
- 이벤트 종류는 이동, 정지, 대사, 맵전환이 있다.

 -->






